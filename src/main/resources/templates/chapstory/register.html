<!-- register.html -->
<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>블로그 작성 페이지</title>
</head>
<div layout:fragment="content">
    <form action="/chapstory/register.do" name="registerForm" enctype="multipart/form-data" method="post">
        <h3> 이건 작성페이지다 !!!</h3>
        <p class="form-floating">
            <input id="user_id" type="text" name="user_id" th:value="${session.loginUser.userId}" readonly class="form-control" placeholder="??">
            <label for="user_id" class="">아이디(글쓴이)</label>
        </p>
        <p class="form-floating">
            <input id="title" type="text" name="title" class="form-control" placeholder="??">
            <label for="title" class="">제목을 입력하세요</label>
<!--            <input type = "file", id="" class="form-control" accept="image/*">-->
        <p id="imgCont">
            <button id="imgAddBtn" class="btn btn-light w-100" type="button">
                이미지
                <i class="bi bi-plus-square"></i>
            </button>
        </p>
            <th:block th:include="/chapstory/write"></th:block>
        </p>
        <button id="resetBtn" class="btn btn-outline-warning me-2" type="button" onclick="resetForm()">초기화</button>
        <button id="addBtn" class="btn btn-outline-primary" type="submit">등록</button>
    </form>
</div>
</html>
<script>
    function resetForm() {
        // 제목 입력 필드 초기화
        document.getElementById('titleInput').value = '';

        // 스마트 에디터 내용 초기화
        oEditors.getById["txtContent"].exec("SET_CONTENTS", ['']);

    }

        const imgAddBtn=document.getElementById("imgAddBtn");
        const imgCont=document.getElementById("imgCont");
        imgAddBtn.addEventListener("click",(e)=>{
            imgCont.insertAdjacentHTML("beforeend",imgInputComponent());
        });

        function imgInputComponent( label="이미지",name="main_img"){
            return `    <div class="input-group mt-2">
                    <label class="input-group-text">${label}</label>
                    <input class="form-control" type="file" name="${name}">
                    <button type="button" class="btn btn-danger" onclick="this.closest('.input-group').remove()">
                        <i class="bi bi-x-lg"></i>
                    </button>
                  </div>
              `;
        }
</script>
